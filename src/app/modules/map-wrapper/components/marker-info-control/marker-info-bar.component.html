<!--suppress HtmlFormInputWithoutLabel -->
<div class="c-sidebar">

  <location-capabilities-search (selectedPoint)="onSelectPoint($event)"
                                [leafletMap]="leafletMap"></location-capabilities-search>
  <div *ngIf="currentPointCapabilities">
    <div class="c-location-name">
      <div>{{currentPointCapabilities.name}}</div>
      <div>{{currentPointCapabilities.area}}</div>
    </div>
    <div class="c-accordion blue">
      <div class="c-accordion-title" (click)="openAccordion($event, 'is-open')">
        <div>Информация</div>
        <div class="c-accordion-button"></div>
      </div>
      <div class="c-accordion-body">
        <div class="c-location-peoples"><span>{{currentPointCapabilities.information.population}}</span> чел.</div>
        <div class="l-sidebar-list">
          <div class="l-sidebar-list-item">
            <div class="o-item-title">Сотовая связь:</div>
            <div class="l-vendors-row">
            <div class="c-vendor"
                 *ngFor="let mobileOperator of currentPointCapabilities.information.cellular"
                 [class.opacity]="!mobileOperator.provider.isActive">
              <div class="c-vendor-logo">
                <img [src]="mobileOperator.provider.icon"
                     [alt]="mobileOperator.provider.name"
                     [title]="mobileOperator.provider.name">
              </div>
              <div class="c-vendor-status-text">{{mobileOperator.mobileGeneration}}</div>
            </div>
            </div>
          </div>
          <div class="l-sidebar-list-item">
            <div class="o-item-title">Интернет:</div>
            <div class="l-vendors-row">
              <div class="c-vendor"
                   [class.opacity]="!internet.provider.isActive"
                   *ngFor="let internet of currentPointCapabilities.information.internet">
                <div class="c-vendor-logo">
                  <img [src]="internet.provider.icon"
                       [alt]="internet.provider.name"
                       [title]="internet.provider.name">
                </div>
                <div class="c-vendor-status-img"
                     [title]="internet.type"
                     [ngClass]="internet.type ">
                </div>
              </div>
            </div>
          </div>
          <div class="l-sidebar-list-item">
            <div class="o-item-title">ТВ:</div>
              <div class="l-vendors-row">
              <div class="c-vendor"
                   [class.opacity]="!tv.provider.isActive"
                   *ngFor="let tv of currentPointCapabilities.information.tv">
                <div class="c-vendor-logo">
                  <img [src]="tv.provider.icon"
                       [alt]="tv.provider.name"
                       [title]="tv.provider.name">
                </div>
                <div class="c-vendor-status-text">{{tv.type}}</div>
              </div>
              </div>
          </div>
          <div class="l-sidebar-list-item" *ngFor="let mail of currentPointCapabilities.information.mail">
            <div class="o-item-title">Почта:</div>
              <div class="check"></div>
              {{mail.provider.name}}
          </div>
          <div class="l-sidebar-list-item">
            <div class="o-item-title">Радио:</div>
              <div class="check"></div>
              <div class="c-vendor" *ngFor="let radio of currentPointCapabilities.information.radio">
                <div class="c-vendor-logo">
                  <img [src]="radio.provider.icon"
                       [alt]="radio.provider.name"
                       [title]="radio.provider.name">
                </div>
              </div>
          </div>
          <div class="l-sidebar-list-item">
            <div class="o-item-title">Таксофон:</div>
            <div class="l-vendors-row">
              <div class="c-vendor" *ngFor="let payphone of currentPointCapabilities.information.payphone">
                <div class="c-vendor-logo">
                  <img [src]="payphone.provider.icon"
                       [alt]="payphone.provider.name"
                       [title]="payphone.provider.name">
                </div>
                <div class="c-vendor-status-text">{{payphone.count}}</div>
              </div>
            </div>
          </div>
          <div class="l-sidebar-list-item">
            <div class="o-item-title">Телефон:</div>
            <div class="check" *ngIf="hasProvider(currentPointCapabilities.information.telephone)"></div>
            <div class="l-vendors-row">
              <div *ngIf="!hasProvider(currentPointCapabilities.information.telephone)">0</div>
              <div class="c-vendor"
                   [class.opacity]="!telephone.provider.isActive"
                   *ngFor="let telephone of currentPointCapabilities.information.telephone">
                <div class="c-vendor-logo">
                  <img [src]="telephone.provider.icon"
                       [alt]="telephone.provider.name"
                       [title]="telephone.provider.name">
                  <div class="status"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="l-sidebar-list-item">
            <div class="o-item-title">Инфомат:</div>
            <div class="value">{{currentPointCapabilities.information.informat ? 1 : 0}}</div>
          </div>
        </div>
      </div>
    </div>
    <div class="c-accordion green">
      <div class="c-accordion-title" (click)="openAccordion($event, 'is-open')">
        <div>
          Организации ({{organizations.length}})
        </div>
        <div class="c-accordion-button"></div>
      </div>
      <div class="c-accordion-body">
        <div class="c-accordion" *ngFor="let organization of organizations">
          {{organization.full_name}}
          <!--          <div class="c-accordion-title green"-->
          <!--               (click)="openAccordion($event, 'is-open')"-->
          <!--               [class.gray-dot]="!organization.avstate"-->
          <!--               [class.red-dot]="organization.avstate && organization.avstate.includes('Не доступно')"-->
          <!--               [class.green-dot]="organization.avstate && !organization.avstate.includes('Не доступно')"-->
          <!--          >-->
          <!--            <div>{{organization.label}}</div>-->
          <!--            <div class="c-accordion-button"></div>-->
          <!--          </div>-->
          <!--          <div class="c-accordion-body">-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Адрес точки подключения:</div>-->
          <!--              <div class="value">{{organization.address}}</div>-->
          <!--            </div>-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Заказчик:</div>-->
          <!--              <div class="value">{{organization.customer}}</div>-->
          <!--            </div>-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Подрядчик:</div>-->
          <!--              <div class="value">{{organization.contractor}}</div>-->
          <!--            </div>-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Технология подключения:</div>-->
          <!--              <div class="value">{{organization.medium_type}}</div>-->
          <!--            </div>-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Точка подключения:</div>-->
          <!--              <div class="value">{{organization.node}}</div>-->
          <!--            </div>-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Скорость по контракту:</div>-->
          <!--              <div class="value">{{organization.defined_speed}}</div>-->
          <!--            </div>-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Состояние:</div>-->
          <!--              <div class="value">{{organization.avstate}}</div>-->
          <!--            </div>-->
          <!--            <div class="l-row">-->
          <!--              <div class="o-item-title">Входящий трафик:</div>-->
          <!--              <div class="value">{{organization.traffic}}</div>-->
          <!--            </div>-->
          <!--          </div>-->
        </div>
      </div>
    </div>
  </div>
</div>
