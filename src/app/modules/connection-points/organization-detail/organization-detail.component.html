<!--suppress HtmlFormInputWithoutLabel -->
<main class="main">
  <div class="wrapper">
    <div class="breadcrumbs">
      <ul class="breadcrumbs-list">
        <li class="breadcrumbs-item"><a class="breadcrumbs-link" href="#">Главная</a></li>
        <li class="breadcrumbs-item">
          <a class="breadcrumbs-link" routerLink="/connection-points"
            >Сводная таблица по организациям</a
          >
        </li>
        <!-- <li class="breadcrumbs-item">
          <span class="breadcrumbs-link">
            {{ locationFeatures.location.typeLocation }} {{ locationFeatures.location.name }} ,
            {{ locationFeatures.location.municipalityArea }}
          </span>
        </li> -->
      </ul>
    </div>
    <div class="l-location-info">
      <div class="c-location-name">
        <div class="c-location-name-item1">
          <!-- {{ locationFeatures.location.typeLocation }} {{ locationFeatures.location.name }} -->
        </div>
        <!-- <div class="c-location-name-item2">{{ locationFeatures.location.municipalityArea }}</div> -->
      </div>
      <div class="c-location-peoples">
        <!-- <span>{{ locationFeatures.location.peopleCount }}</span> чел. -->
      </div>
    </div>
    <!-- WIP: Here we go with Organization -->

    <div class="wip-organization" *ngIf="organization" [formGroup]="formGroupOrganization">
      <input
        *ngIf="formGroupOrganization.enabled"
        type="button"
        class="btn btn-cancel-form"
        value="Отмена"
        (click)="cancelEdit()"
      />
      <input
        *ngIf="formGroupOrganization.disabled"
        type="button"
        class="btn btn-edit-form"
        value="Редактировать организацию"
        (click)="enableForm()"
      />
      <input
        type="button"
        class="btn save"
        value="Сохранить"
        *ngIf="formGroupOrganization.enabled"
        [disabled] = "!formGroupOrganization.valid"
        (click)="saveRequest()"
      />
      <div class="organ">
        <div class="organ-item">
          <label>Краткое наименование: <input type="text" formControlName="_name"/></label>
        </div>
        <div class="organ-item">
          <label
            >Полное наименование: <input type="text" formControlName="_fullName"
          /></label>
        </div>
        <div class="organ-item">
          <label>Адрес: <input type="text" formControlName="_address"/></label>
        </div>
        <div class="organ-item">
          <label>ИНН: <input type="text" formControlName="_inn"/></label>
        </div>
        <div class="organ-item">
          <label>КПП: <input type="text" formControlName="_kpp"/></label>
        </div>
        <div class="organ-item">
          <label>ФИАС: <input type="text" formControlName="_fias"/></label>
          <div class="error" *ngIf="formGroupOrganization.get('_fias').invalid">
            Должно соответствовать формату "00000000-0000-0000-0000-000000000000"
          </div>
        </div>
        <div class="organ-item">
          <label>Тип:
            <select formControlName="_type" [compareWith]="compareFn">
              <option [ngValue]="null">Не выбран</option>
              <option *ngFor="let item of fOrganizationTypes$ | async" [ngValue]="item">
                {{ item.name }}
              </option>
            </select></label>
        </div>
        <div class="organ-item">
          <label>СЗО:
            <select formControlName="_smoType" [compareWith]="compareFn">
              <option [ngValue]="null">Не выбран</option>
              <option *ngFor="let item of fOrganizationSMOTypes$ | async" [ngValue]="item">
                {{ item.name }}
              </option>
            </select></label>
        </div>
        <!-- <div>ОГРН: {{organization.ogrn}}</div>
        <div>ОКТМО: {{organization.oktmo}}</div> -->
      </div>
      <br />
      <div class="add-point">
        <button type="button" class="btn">Добавить точку подключения</button>
      </div>
      <div class="wip-organization-access-points">
        <div *ngFor="let ap of organization.reaccesspoints" class="point">
          <hr />
          <div class="point-item">Адрес: {{ ap.address }}</div>
          <!-- <div class="point-item">Координата: {{ap.coordinate}}</div> -->
          <div class="point-item">Отображается: <input type="checkbox" disabled checked="{{ ap.visible }}" /></div>
          <div class="point-item">Узел доступа: {{ ap.node }}</div>
          <div class="point-item">Тип подключения: {{ ap.connectionTypeString }}</div>

          <div class="point-item">Оператор связи: {{ ap.contractor }}</div>
          <!-- <div class="point-item">Контракт: {{ap.type}}</div> -->
          <div class="point-item">Скорость по контракту: {{ ap.definedSpeed }}</div>
          <!-- <div class="point-item">Ширина канала: {{ap.type}}</div> -->
          <div class="point-item">Качество связи: {{ ap.quality }}</div>
          <div class="point-item">Государственная программа: {{ ap.governmentProgram.shortName }}</div>
          <!-- <div class="point-item">Статус участия: {{ap.type}}</div>
          <div class="point-item">Год реализации: {{ap.type}}</div> -->
        </div>
      </div>
    </div>
  </div>
</main>
